import{r as c,g as v,h as f,d as x,A as w,j as s,a as e,i as L,p as k,s as D,k as S,w as y}from"./index-c532219d.js";import{A as b}from"./index-6b4d5e14.js";import{T as p}from"./Typography-cb50676a.js";import{S as A}from"./Stack-9a7d6fdd.js";import{T as u,B,D as P}from"./TextField-4d23d510.js";import{B as T}from"./Box-468bb675.js";import"./index-f3dff108.js";import"./Paper-09fff5fc.js";import"./ButtonBase-c29cbbf3.js";import"./createSvgIcon-bfe4a7b4.js";import"./utils-42395edc.js";const H=()=>{const[a,m]=c.useState(""),[r,l]=c.useState(""),d=v(),n=f(),{enqueueSnackbar:i}=x(),[g,{isLoading:h}]=w.useLoginMutation();return s(b,{isLoading:h,children:[e(p,{variant:"h5",component:"h5",align:"center",sx:{mb:3},children:"Sign-in to your account"}),s(A,{spacing:2,children:[e(u,{required:!0,type:"email",label:"Email",value:a,onChange:t=>{m(t.target.value)}}),e(u,{required:!0,type:"password",label:"Password",value:r,onChange:t=>{l(t.target.value)}})]}),e(B,{variant:"contained",sx:{width:"200px",mx:"auto",my:3},onClick:()=>{a&&r&&g({email:a.trim(),password:r.trim()}).unwrap().then(t=>{if(t.success){d("/",{replace:!0});const o={id:t.data.id,username:t.data.username,email:t.data.email,profilePhoto:t.data.profilePhoto||k};return n(D(o)),n(S(t.data.cart)),y("user",{...o,token:t.token}),i(t.message,{variant:"success",preventDuplicate:!0})}return i(t.message,{variant:"error",preventDuplicate:!0})}).catch(()=>i("Provided wrong credentials",{variant:"error",preventDuplicate:!0}))},children:"Login"}),e(P,{}),e(T,{sx:{mt:2},children:s(p,{variant:"body2",align:"center",component:"p",children:["New here? ",e(L,{to:"/register",children:"Register"})," an account"]})})]})};export{H as default};
