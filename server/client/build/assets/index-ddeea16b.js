import{a as e,j as t,r as m,b as S,A as B,h as P,g as U,L as T,l as k,n as z,w as E,F as L,R as $}from"./index-c532219d.js";import{B as d}from"./Box-468bb675.js";import{S as u}from"./Stack-9a7d6fdd.js";import{T as n}from"./Typography-cb50676a.js";import{d as A}from"./ExpandMore-c9f5f3ac.js";import{C as q,d as H}from"./Delete-211e5082.js";import{u as _}from"./user.selector-3f16c101.js";import{A as y,a as x,b as D}from"./AccordionSummary-cf7a2d84.js";import{B as O}from"./TextField-4d23d510.js";import{r as W,i as N,a as Y}from"./jsx-runtime_commonjs-proxy-6abecf05.js";import{R as G,A as Q}from"./index-e0b2cbda.js";import{U as b,P as V}from"./user.api-0ba6d604.js";import{I as J}from"./IconButton-4cf745ba.js";import{T as K}from"./Tooltip-d559d638.js";import{F as X,T as Z,a as C}from"./Tabs-5d9f3ab3.js";import"./Paper-09fff5fc.js";import"./createSvgIcon-bfe4a7b4.js";import"./utils-42395edc.js";import"./ButtonBase-c29cbbf3.js";import"./Grid-b8fb3a11.js";const ee={height:"15vh",width:"15vh",borderRadius:"50%",overflow:"hidden",border:"0.5rem solid #F2F1EF"},te=({photo:a,username:r})=>e(d,{sx:{p:2,backgroundColor:"#D2D7D3"},children:t(u,{direction:"column",spacing:2,justifyContent:"center",alignItems:"center",sx:{width:"fit-content",m:"auto"},children:[e(d,{sx:ee,children:e("img",{src:a,alt:"",style:{width:"100%",height:"100%"}})}),e(n,{variant:"h5",children:`Hi, ${r}`})]})}),re=()=>{const[a,r]=m.useState(!1),s=S(_),[o,{isLoading:h}]=B.useDeactivateAccountMutation(),c=P(),f=U(),g=()=>{r(!1),o({id:s.id}).unwrap().then(()=>{c(k()),c(z()),window.localStorage.clear(),E("cart",[]),f("/",{replace:!0})})};return h?e(T,{}):t(d,{sx:{p:1,width:{sm:"90%",md:"50%",lg:"40%"},m:"1rem auto"},children:[t(y,{children:[e(x,{expandIcon:e(A,{}),children:e(n,{variant:"body1",component:"p",children:"Basic details"})}),e(D,{children:t(u,{direction:"column",spacing:3,sx:{mb:2},children:[t(u,{direction:"row",justifyContent:"space-between",children:[e(n,{variant:"body1",children:"Name:"}),e(n,{variant:"body1",children:s.username})]}),t(u,{direction:"row",justifyContent:"space-between",children:[e(n,{variant:"body1",children:"Email:"}),e(n,{variant:"body1",children:s.email})]})]})})]}),t(y,{children:[e(x,{expandIcon:e(A,{}),children:e(n,{variant:"body1",component:"p",children:"Danger zone"})}),e(D,{children:t(u,{direction:"row",justifyContent:"space-between",children:[e(n,{variant:"body1",children:"Delete account:"}),e(O,{variant:"contained",color:"error",onClick:()=>r(!0),children:"Delete account"})]})})]}),a&&e(q,{open:a,onClose:()=>r(!1),onConfirm:g,message:"Are you sure you want to delete your account?",confirmLabel:"Yes",children:e(n,{variant:"caption",color:"error",children:"This action is permanent"})})]})};var w={},ae=N;Object.defineProperty(w,"__esModule",{value:!0});var I=w.default=void 0,oe=ae(W()),ne=Y,ie=(0,oe.default)((0,ne.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");I=w.default=ie;const se=()=>{const[a,r]=m.useState(!1),[s,{isLoading:o}]=b.useDeleteAddressMutation(),[h,{isLoading:c,isFetching:f}]=b.useLazyGetAddressesQuery(),[g,{isLoading:j}]=b.useAddAddressMutation(),[p,v]=m.useState([]),F=i=>{s({addressID:i._id}).unwrap().then(()=>{p.length!==0&&v(l=>l.filter(R=>R._id!==i._id))})};m.useEffect(()=>{h(null,!0).unwrap().then(i=>{v([...i.data]),r(!1)})},[]);const M=i=>{g(i).unwrap().then(l=>{v(l.data)}),r(!1)};return t(L,{children:[(o||j||c||f)&&e(T,{}),t(d,{sx:{p:1,width:{sm:"90%",md:"50%",lg:"40%"},m:"1rem auto",position:"relative"},children:[e(d,{sx:{height:"36vh",overflow:"auto"},children:p&&p.length>0?p.map((i,l)=>t(d,{sx:{position:"relative"},children:[e(J,{onClick:()=>F(i),sx:{position:"absolute",top:10,right:10,zIndex:11},children:e(H,{})}),e(G,{data:i})]},l)):e(n,{variant:"h5",align:"center",children:"You don't have any addresses saved in your account"})}),e(K,{title:"Add address",children:e(X,{color:"warning",onClick:()=>{r(!0)},sx:{zIndex:10,position:"absolute",bottom:50,right:40},children:e(I,{})})}),a&&e(V,{showModal:a,setShowModal:r,title:"Add an address",children:e(Q,{action:M})})]})]})},_e=()=>{const[a,r]=$.useState(0),s=(h,c)=>{r(c)},o=S(_);return t(L,{children:[e(te,{photo:o==null?void 0:o.profilePhoto,username:o==null?void 0:o.username}),t(d,{children:[t(Z,{value:a,onChange:s,centered:!0,children:[e(C,{label:"User details"}),e(C,{label:"Delivery details"})]}),a===0&&e(re,{}),a===1&&e(se,{})]})]})};export{_e as default};
