import{r,h as S,d as b,g as k,A as C,j as c,a,i as D,p as P,s as y,k as R,w as A}from"./index-c532219d.js";import{A as q}from"./index-6b4d5e14.js";import{T as m}from"./Typography-cb50676a.js";import{S as B}from"./Stack-9a7d6fdd.js";import{T as s,B as L,D as T}from"./TextField-4d23d510.js";import{B as j}from"./Box-468bb675.js";import"./index-f3dff108.js";import"./Paper-09fff5fc.js";import"./ButtonBase-c29cbbf3.js";import"./createSvgIcon-bfe4a7b4.js";import"./utils-42395edc.js";const Q=()=>{const[i,d]=r.useState(""),[n,g]=r.useState(""),[t,h]=r.useState(""),[u,v]=r.useState(""),p=S(),{enqueueSnackbar:o}=b(),w=k(),[f,{isLoading:x}]=C.useRegisterMutation();return c(q,{isLoading:x,children:[a(m,{variant:"h5",component:"h5",align:"center",sx:{mb:3},children:"Create an account"}),c(B,{spacing:2,children:[a(s,{required:!0,label:"Name",value:i,onChange:e=>{d(e.target.value)}}),a(s,{required:!0,type:"email",label:"Email",value:n,onChange:e=>{g(e.target.value)}}),a(s,{required:!0,type:"password",label:"Password",value:t,onChange:e=>{h(e.target.value)}}),a(s,{required:!0,type:"password",label:"Repeat Password",value:u,onChange:e=>{v(e.target.value)}})]}),a(L,{variant:"contained",sx:{width:"200px",mx:"auto",my:3},onClick:()=>{i&&n&&t&&t===u&&f({username:i.trim(),email:n.trim(),password:t.trim()}).unwrap().then(e=>{if(e.success){w("/",{replace:!0});const l={id:e.data.id,username:e.data.username,email:e.data.email,profilePhoto:e.data.profilePhoto||P};return p(y(l)),p(R(e.data.cart)),A("user",{...l,token:e.token}),o(e.message,{variant:"success",preventDuplicate:!0})}return o(e.message,{variant:"error",preventDuplicate:!0})}).catch(()=>{o("Provided incomplete or wrong credentials",{variant:"error",preventDuplicate:!0})})},children:"Create an account"}),a(T,{}),a(j,{sx:{mt:2},children:c(m,{variant:"body2",align:"center",component:"p",children:["Have an account?Â ",a(D,{to:"/login",children:"Login"})]})})]})};export{Q as default};
