import{j as a,a as e,i as ge,g as ae,h as V,A as ye,r as c,F as C,H as xe,l as _e,n as ne,w as Se,b,L as ie,c as H,m as Ce,I as oe,N as Ie,J as we,K as $e,M as qe}from"./index-c532219d.js";import{B as ke}from"./index-f3dff108.js";import{U as A,P as B}from"./user.api-0ba6d604.js";import{r as q,i as k,a as M}from"./jsx-runtime_commonjs-proxy-6abecf05.js";import{c as T,d as Me}from"./AccountCircle-d6edb3af.js";import{u as W}from"./user.selector-3f16c101.js";import{B as w,k as be,y as De,D as ce,q as Le,s as Ee,T as L,w as Ae,l as Be,n as Te}from"./TextField-4d23d510.js";import{P as Pe,C as ze}from"./Tooltip-d559d638.js";import{P as se}from"./Paper-09fff5fc.js";import{M as R,h as N,B as Re,k as Ne,F as Fe,R as He,L as X,j as Z,S as Ve,a as We,b as je,A as Qe,T as Ge}from"./Toolbar-5d7ff2ef.js";import{I as P,T as u,M as O}from"./Typography-cb50676a.js";import{R as Ke,A as Ue}from"./index-e0b2cbda.js";import{B as D}from"./Box-468bb675.js";import{G as d}from"./Grid-b8fb3a11.js";import{O as Ye}from"./orders.api-db5d74d7.js";import{P as Je}from"./index-af1311f1.js";import{s as Xe,T as Ze}from"./index-a2692f30.js";import{S as le}from"./Stack-9a7d6fdd.js";import{I as Oe}from"./index-43b592c3.js";import{I as ee}from"./IconButton-4cf745ba.js";import"./createSvgIcon-bfe4a7b4.js";import"./ButtonBase-c29cbbf3.js";import"./utils-42395edc.js";import"./index-5395b612.js";import"./Rating-bcc8cf58.js";var j={},et=k;Object.defineProperty(j,"__esModule",{value:!0});var ue=j.default=void 0,tt=et(q()),rt=M,at=(0,tt.default)((0,rt.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCart");ue=j.default=at;const F=({refference:t,title:r,href:i="/",type:n="Link",onClick:o=()=>{},icon:l})=>n==="Menu"||n==="Popup"?a(w,{variant:"text",color:"inherit",onClick:o,ref:t,children:[r,"Â ",l]}):e(w,{variant:"text",color:"inherit",component:ge,to:i,children:r});var Q={},nt=k;Object.defineProperty(Q,"__esModule",{value:!0});var de=Q.default=void 0,it=nt(q()),ot=M,ct=(0,it.default)((0,ot.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");de=Q.default=ct;var G={},st=k;Object.defineProperty(G,"__esModule",{value:!0});var he=G.default=void 0,lt=st(q()),ut=M,dt=(0,lt.default)((0,ut.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");he=G.default=dt;var K={},ht=k;Object.defineProperty(K,"__esModule",{value:!0});var me=K.default=void 0,mt=ht(q()),pt=M,vt=(0,mt.default)((0,pt.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9 1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping");me=K.default=vt;const ft=({open:t,anchorRef:r,setOpen:i})=>{const n=ae(),o=V(),[l]=ye.useLazyLogoutQuery(),[f]=A.useAddItemToCartMutation(),y=x=>{r.current&&r.current.contains(x.target)||i(!1)},g=x=>{n(x)},s=c.useRef(t);return c.useEffect(()=>{s.current===!0&&t===!1&&r.current.focus(),s.current=t},[t]),e(C,{children:r.current&&e(Pe,{open:t,anchorEl:r.current,placement:"bottom-start",transition:!0,disablePortal:!0,sx:{zIndex:100},children:({TransitionProps:x,placement:h})=>e(be,{...x,style:{transformOrigin:h==="bottom-start"?"left top":"left bottom"},children:e(se,{children:e(ze,{onClickAway:y,children:a(De,{autoFocusItem:t,children:[a(R,{onClick:()=>{i(!1),g("/orders")},children:[e(N,{children:e(me,{fontSize:"small"})}),"Your orders"]}),a(R,{onClick:()=>{i(!1),g("/settings")},children:[e(N,{children:e(de,{fontSize:"small"})}),"Settings"]}),e(ce,{}),a(R,{onClick:()=>{const _=xe("cart",[]);_.length!==0&&f({productId:_.map(v=>v.productID),operation:"add"}),l(null).unwrap().then(()=>{o(_e()),o(ne()),window.localStorage.clear(),Se("cart",[]),n("/",{replace:!0})})},children:[e(N,{children:e(he,{fontSize:"small"})}),"Logout"]})]})})})})})})},gt=P(Re)(({theme:t})=>({"& .MuiBadge-badge":{right:-3,top:13,border:`2px solid ${t.palette.background.paper}`,padding:"0 4px"}})),yt=({setShowCart:t})=>{const r=b(W),i=b(T),[n,o]=c.useState(!1),l=c.useRef(null),f=()=>{o(y=>!y)};return a(C,{children:[r&&r.username!==""?a(C,{children:[e(F,{type:"Menu",title:r.username,refference:l,icon:e(Me,{}),onClick:f}),e(ft,{open:n,setOpen:o,anchorRef:l})]}):e(F,{href:"/login",title:"Login"}),e(gt,{badgeContent:i.cartItemCount,color:"warning",children:e(F,{type:"Popup",title:"Cart",onClick:()=>t(!0),icon:e(ue,{sx:{fontSize:"1rem"}})})})]})},xt=({addressHandler:t,handleNext:r})=>{const[i,n]=c.useState(!1),[o,l]=c.useState(!1),[f,y]=c.useState(""),[g,s]=c.useState([]),[x,{isLoading:h,isFetching:_}]=A.useLazyGetAddressesQuery(),[v,{isLoading:m}]=A.useAddAddressMutation(),I=p=>{y(p.target.value)},z=()=>{const p=g==null?void 0:g.find($=>$.name===f);p?(t(p),r()):l(!0)};c.useEffect(()=>{x(null,!0).unwrap().then(p=>{s([...p.data])})},[]);const S=p=>{v(p).unwrap().then($=>{s($.data)}),n(!1)};return h||_||m?e(ie,{}):a(C,{children:[a(Le,{sx:{width:"100%"},children:[e(Ee,{children:"Where to deliver your order?"}),e(Ne,{name:"address",sx:{p:1},value:f,onChange:I,children:g&&g.map((p,$)=>e(Fe,{value:p.name,control:e(He,{}),label:e(Ke,{data:p,textOnly:!0})},$))}),o&&e(u,{variant:"caption",display:"block",gutterBottom:!0,color:"red",children:"Select an address or add new to proceed further"}),e(w,{onClick:()=>n(!0),children:"Add address"})]}),e(D,{sx:{display:"flex",justifyContent:"flex-end"},children:e(w,{variant:"contained",onClick:z,sx:{mt:3,ml:1},children:"Next"})}),i&&e(B,{showModal:i,setShowModal:n,title:"Add an address",children:e(Ue,{action:S})})]})},_t=({paymentHandler:t,handleBack:r,handleNext:i})=>{const[n,o]=c.useState(""),[l,f]=c.useState(""),[y,g]=c.useState(""),[s,x]=c.useState(""),[h,_]=c.useState({nameError:!1,numberError:!1,expiryError:!1,cvvError:!1}),v=()=>{const m={name:n,number:l,expiry:y,cvv:s},I={nameError:n.trim()==="",numberError:l.trim()===""||l.trim().length!==16,expiryError:y.trim()==="",cvvError:s.trim()===""||s.trim().length!==4};_(I),!I.nameError&&!I.numberError&&!I.expiryError&&!I.cvvError&&(t(m),i())};return a(C,{children:[e(u,{variant:"h6",gutterBottom:!0,children:"Payment method"}),a(d,{container:!0,spacing:3,children:[e(d,{item:!0,xs:12,md:6,children:e(L,{required:!0,value:n,onChange:m=>o(m.target.value),label:"Name on card",fullWidth:!0,variant:"standard",error:h.nameError,helperText:h.nameError?"This field is required":""})}),e(d,{item:!0,xs:12,md:6,children:e(L,{required:!0,value:l,onChange:m=>f(m.target.value),label:"Card number",fullWidth:!0,variant:"standard",error:h.numberError,helperText:h.numberError?"16 character card number required":""})}),e(d,{item:!0,xs:12,md:6,children:e(L,{required:!0,value:y,onChange:m=>g(m.target.value),label:"Expiry date",fullWidth:!0,variant:"standard",error:h.expiryError,helperText:h.expiryError?"This field is required":""})}),e(d,{item:!0,xs:12,md:6,children:e(L,{required:!0,value:s,onChange:m=>x(m.target.value),label:"CVV",fullWidth:!0,variant:"standard",error:h.cvvError,helperText:h.cvvError?"4 character card cvv required":""})})]}),a(D,{sx:{display:"flex",justifyContent:"flex-end"},children:[e(w,{onClick:r,sx:{mt:3,ml:1},children:"Back"}),e(w,{variant:"contained",onClick:v,sx:{mt:3,ml:1},children:"Next"})]})]})},St=({errorItems:t})=>a(C,{children:[e(u,{variant:"body1",children:"Following are the items that not available in the requested quantity. Remove them and place the order again"}),t.map((r,i)=>e(Je,{product:r},i))]}),te=t=>`${t==null?void 0:t.name},
${t==null?void 0:t.address},
${t==null?void 0:t.city}, ${t==null?void 0:t.state}, ${t==null?void 0:t.country}
${t==null?void 0:t.pin}`,Ct=({cartId:t,product:r})=>a(le,{spacing:2,direction:"row",children:[e(u,{variant:"caption",children:`Qty: ${t[r.productID]}`}),e(u,{variant:"caption",children:`Discount: ${r.discount}%`})]}),It=({data:t,handleBack:r,handleNext:i})=>{const{address:n,payment:o}=t,[l,f]=c.useState(!1),[y,g]=c.useState([]),s=b(T),x=V(),[h,{isLoading:_}]=Ye.useAddOrderMutation(),v=()=>{const I=Object.keys(s.cartId).map(S=>{const p=s.cart.find($=>$.productID===S);return{product:S,pricePaid:oe((p==null?void 0:p.price)||0,(p==null?void 0:p.discount)||0),qty:s.cartId[S]}}),z={shipTo:te(n),products:I,payment:{cardName:o.name,cardNumber:o.number},totalAmount:s.cartValue};h(z).unwrap().then(S=>{S.success?(x(ne()),i(S.order._id)):(f(!0),S.data&&g(S.data))})};return a(C,{children:[_&&e(ie,{}),a(D,{children:[e(u,{variant:"h6",gutterBottom:!0,children:"Order summary"}),a(Ae,{disablePadding:!0,children:[s.cart.map(m=>a(X,{sx:{py:1,px:0},children:[e(Z,{primary:Xe(m.title)[0],secondary:e(Ct,{cartId:s.cartId,product:m})}),e(u,{variant:"body2",children:s.cartId[m.productID]*m.price})]},m.title)),a(X,{sx:{border:`1px solid ${H.caption}`,backgroundColor:H.primary},children:[e(Z,{primary:"Price to pay"}),e(u,{variant:"subtitle1",sx:{fontWeight:700},children:`Rs ${s.cartValue}`})]})]}),a(d,{container:!0,spacing:2,children:[a(d,{item:!0,xs:12,sm:6,children:[e(u,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Shipping"}),e(u,{gutterBottom:!0,children:n.name.toUpperCase()}),e(u,{gutterBottom:!0,children:te(n)})]}),a(d,{item:!0,container:!0,direction:"column",xs:12,sm:6,children:[e(u,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Payment details"}),e(d,{container:!0,children:o&&a("div",{children:[e(d,{item:!0,xs:6,children:e(u,{gutterBottom:!0,children:o.name})}),e(d,{item:!0,xs:6,children:e(u,{gutterBottom:!0,children:Ce(o.number)})})]})})]})]}),a(D,{sx:{display:"flex",justifyContent:"flex-end"},children:[e(w,{onClick:r,sx:{mt:3,ml:1},children:"Back"}),e(w,{variant:"contained",onClick:v,sx:{mt:3,ml:1},children:"Place Order"})]})]}),l&&e(B,{showModal:l,setShowModal:f,title:"Order failed",children:e(St,{errorItems:y})})]})},re=["Shipping address","Payment details","Review your order"],wt=()=>{const[t,r]=c.useState(0),[i,n]=c.useState(""),[o,l]=c.useState({name:"",address:"",city:"",state:"",pin:0,country:""}),[f,y]=c.useState({name:"",number:"",expiry:"",cvv:""}),g=b(W),s=v=>{l(v)},x=v=>{y(v)},h=(v="")=>{v!==""&&n(v),r(t+1)},_=()=>{r(t-1)};return g.id?a("div",{children:[e(Ve,{activeStep:t,sx:{pt:3,pb:5},children:re.map(v=>e(We,{children:e(je,{children:v})},v))}),t===re.length?a(C,{children:[e(u,{variant:"h5",gutterBottom:!0,children:"Thank you for your order!!"}),e(u,{variant:"subtitle1",children:`Your order number is #${i}. We have emailed your order confirmation, and will send you an update when your order has shipped.`})]}):a(C,{children:[t===0&&e(xt,{addressHandler:s,handleNext:h}),t===1&&e(_t,{paymentHandler:x,handleBack:_,handleNext:h}),t===2&&e(It,{data:{address:o,payment:f},handleBack:_,handleNext:h})]})]}):e(Ie,{to:"/login"})};var U={},$t=k;Object.defineProperty(U,"__esModule",{value:!0});var pe=U.default=void 0,qt=$t(q()),kt=M,Mt=(0,qt.default)((0,kt.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");pe=U.default=Mt;const bt=P("div")(({theme:t})=>({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:O(t.palette.common.white,.5),"&:hover":{backgroundColor:O(t.palette.common.white,1)},marginLeft:0,width:"100%"})),Dt=P("div")(({theme:t})=>({padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"})),Lt=P(Be)(({theme:t})=>({color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:`calc(1em + ${t.spacing(4)})`,transition:t.transitions.create("width"),width:"100%",[t.breakpoints.up("xs")]:{width:"12ch","&:focus":{width:"40ch"}}}})),Et=()=>{const[t,r]=c.useState(""),i=ae();return a(bt,{children:[e(Dt,{children:e(pe,{})}),e(Lt,{onKeyPress:n=>{n.key==="Enter"&&t!==""&&i(`/search/${t}`)},onChange:n=>r(n.target.value),placeholder:"Searchâ¦",inputProps:{"aria-label":"search"}})]})};var Y={},At=k;Object.defineProperty(Y,"__esModule",{value:!0});var ve=Y.default=void 0,Bt=At(q()),Tt=M,Pt=(0,Bt.default)((0,Tt.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");ve=Y.default=Pt;var J={},zt=k;Object.defineProperty(J,"__esModule",{value:!0});var fe=J.default=void 0,Rt=zt(q()),Nt=M,Ft=(0,Rt.default)((0,Nt.jsx)("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline");fe=J.default=Ft;const Ht="_quantity_1vusr_1",Vt="_quantity__minus_1vusr_15",Wt="_quantity__plus_1vusr_17",jt="_quantity__input_1vusr_55",E={quantity:Ht,quantity__minus:Vt,quantity__plus:Wt,quantity__input:jt},Qt=({item:t})=>{const r=b(T),i=b(W),n=V(),[o]=A.useAddItemToCartMutation(),l=()=>{i.id&&o({productId:t.productID,operation:"add"}),n(we(t))},f=()=>{i.id&&o({productId:t.productID,operation:"delete"}),n($e(t))};return e(Te,{in:!!r.cartId[t.productID],children:e(se,{sx:{p:1,m:1},children:a(d,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e(d,{item:!0,sm:3,md:2,lg:2,children:e(Oe,{image:t.image})}),e(d,{item:!0,sm:8,md:6,lg:7,children:e(Ze,{productTitle:t.title})}),e(d,{item:!0,sm:3,md:1,lg:1,children:e(u,{variant:"h6",component:"h6",sx:{fontWeight:700},align:"center",children:oe(t.price,t.discount)})}),e(d,{item:!0,sm:3,md:2.5,lg:2,children:a("div",{className:E.quantity,children:[e(ee,{className:E.quantity__minus,onClick:f,children:e(fe,{})}),e("input",{name:"quantity",type:"text",className:E.quantity__input,value:r.cartId[t.productID],readOnly:!0}),e(ee,{className:E.quantity__plus,onClick:l,disabled:r.cartId[t.productID]+1>t.stock,children:e(ve,{})})]})})]})})})},Gt=({setShowCheckout:t,setShowCart:r})=>{const i=qe(T),n=()=>{t(!0),r(!1)};return a(C,{children:[a(le,{direction:"row",justifyContent:"space-around",sx:{p:1},alignItems:"center",children:[e(u,{variant:"body1",children:`Items: ${i.cartItemCount}`}),e(u,{variant:"body1",children:`Amount: ${i.cartValue}`}),i.cartItemCount!==0&&e(w,{variant:"contained",size:"small",onClick:n,children:"Checkout"})]}),e(ce,{}),e(D,{sx:{maxHeight:"60vh",overflow:"auto"},children:i.cartItemCount===0?e(u,{variant:"h4",component:"h4",align:"center",sx:{p:3},children:"Cart is empty"}):i.cart.map(o=>e(Qt,{item:o},o.productID))})]})},yr=()=>{const[t,r]=c.useState(!1),[i,n]=c.useState(!1);return a(Qe,{position:"relative",component:"nav",style:{background:H.primary,boxShadow:"none",color:"#000"},children:[e(Ge,{disableGutters:!0,children:a(d,{container:!0,direction:"row",spacing:2,justifyContent:"center",children:[e(d,{item:!0,xs:12,sm:12,md:3,lg:2,sx:{textAlign:"center"},children:e(ke,{styles:{margin:"0 1.5rem"}})}),e(d,{item:!0,xs:12,sm:10,md:5,lg:6,children:e("div",{style:{width:"fit-content",margin:"auto"},children:e(Et,{})})}),e(d,{item:!0,xs:12,sm:12,md:4,lg:2,sx:{display:"flex",justifyContent:"space-around"},children:e(yt,{setShowCart:r})})]})}),t&&e(B,{showModal:t,setShowModal:r,title:"Your cart",children:e(Gt,{setShowCheckout:n,setShowCart:r})}),i&&e(B,{showModal:i,setShowModal:n,title:"Checkout",children:e(wt,{})})]})};export{yr as default};
